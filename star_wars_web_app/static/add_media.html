<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset="UTF-8" />
        <meta name = "viewport" content = "width=device-width", inital-scale="1.0"/>
        <title> Document</title>
    </head>
    <body>
        <!--- < h1>Hello</h1> -->

        <h1>Adding in Media</h1>
        <!-- Creating a form 1st-->
        <form id = "registration_form_for_media">
            <input type="text" id="media_title" placeholder="Add Title" size="50"/><br />
            <input type="text" id="media_super_heading" placeholder="Add Series" size="50"/><br />
            <input type="text" id="number_in_series" placeholder="Add Place in Series" size="50"/><br />
            <input type="text" id="author" placeholder="Add Author" size="50"/><br />
            <input type="text" id="publisher" placeholder="Add Publisher" size="50"/><br />
            <input type="text" id="star_wars_date" placeholder="Add Date in Star Wars" size="50"/><br />
            <input type="text" id="published_date" placeholder="Add Published Date" size="50"/><br />
            <!-- Then click on submit button-->
            <input type = "submit" value = "Submit Form" />
            <!--Whenever somebody clicks on the submit form, the registerUser function gets called-->
            <!--Then that request is made to the server-->
            <!-- Result variable is what the server responds-->
        </form>

        <script>
            const form = document.getElementById('registration_form_for_media')
            form.addEventListener('submit', registerMedia)

            async function registerMedia(event){
                //Default of the forms is to refreas the page, want to stop that
                event.preventDefault()

                //Need the value of these, not just the document.getElebyID('stuff')
                const title = document.getElementById('media_title').value
                const series = document.getElementById('media_super_heading').value
                const num_in_series = document.getElementById('number_in_series').value
                const author = document.getElementById('author').value
                const publisher = document.getElementById('publisher').value
                const star_wars_date = document.getElementById('star_wars_date').value
                const published_date = document.getElementById('published_date').value
                //now want to send this data to node server

                const result = await fetch('/api/register_media',{
                //when sending data as JSON, this is the way:
                    method: 'POST',
                    headers:{
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title, 
                        series, 
                        num_in_series,
                        author,
                        publisher,
                        star_wars_date,
                        published_date
                    })
                }).then((res) => res.json()) // result from server into json

                //console.log(result)

                if (result.status === 'ok') {
					// everythign went fine
					alert('Success')
				} else {
					alert(result.error)
				}

            }
        </script>
    </body>
</html>